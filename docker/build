#!/bin/bash

cd "$(dirname "$0")" || exit

docker build -t blah/elasticsearch blah-elasticsearch/ || exit
docker build -t blah/flume blah-flume/ || exit
docker build -t blah/hadoop-base blah-hadoop-base/ || exit
docker build -t blah/hadoop-master blah-hadoop-master/ || exit
docker build -t blah/hadoop-slave blah-hadoop-slave/ || exit
docker build -t blah/mesos-dns blah-mesos-dns/ || exit
docker build -t blah/spark-mesos blah-spark-mesos/ || exit

cd .. || exit

sbt api/docker:publishLocal || exit
sbt serving/docker:publishLocal || exit
sbt algo/assembly || exit
sbt algo/docker:publishLocal || exit
